@{
    ViewBag.Title = "Phát livestream";
    var whip = (string)ViewBag.WhipEndpoint;
    var token = (string)(ViewBag.WhipBearerToken ?? string.Empty);
}

<h1>Phát livestream (trình duyệt điện thoại)</h1>
<p>Cho phép truy cập camera/mic, sau đó bấm Bắt đầu.</p>

<video id="preview" autoplay playsinline muted style="width:100%;max-width:420px;background:#000"></video>
<div style="margin:12px 0">
    <label>Độ phân giải: </label>
    <select id="resolution">
        <option value="1280x720">1280x720</option>
        <option value="1920x1080">1920x1080</option>
        <option value="640x360">640x360</option>
    </select>
</div>
<button id="btnStart">Bắt đầu livestream</button>
<button id="btnStop" disabled>Kết thúc</button>

<div id="status" style="margin-top:10px;color:#0a0"></div>

<script src="/js/whip-publisher.js"></script>
<script>
    window.initWhipPublisher({
        videoElId: 'preview',
        startBtnId: 'btnStart',
        stopBtnId: 'btnStop',
        resolutionSelId: 'resolution',
        whipEndpoint: '@whip',
        bearerToken: '@token'
    });
</script>